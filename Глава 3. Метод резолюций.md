# Глава 3. Метод резолюций

## §1. Метод резолюций для логики высказываний

Пусть имеется некоторая формула (построенная по алфавиту, введенному в первой главе). Запишем эту формулу в конъюнктивной нормальной форме (выберем любую из них) и отныне будем работать только с этой новой формулой. Итак, наша фомула представляет из себя выражение вида $F_1\land F_2 \land F_3 \land ...\land F_n$, причем ни одно из выражений $F_i$ конъюнкций не содержит.

<u>Опр.</u> В этой форме переменные, входящие в выражения $F_i$, причем не обязательно во все сразу, будем называть **литералами**.

Нам потребуется следующее

<u>Опр.</u> **Дизъюнктором** в некоторой конъюнктивной нормальной форме будем называть дизъюнкцию нескольких литералов $x_i$, в которой нет повторяющихся литералов с точностью до инверсии литерала.

> Любую конъюнкивно нормальную форму можно привести к конъюнкции некоторого числа дизъюнкторов. Действительно, повторяющиеся литералы и их отрицания можно исключить из всех выражений $F_i$, используя закон идемпотентности $x_i \lor x_i = x_i $ и закон исключенного третьего $x_i \lor \neg x_i = 1$.

Итак, с этого момента мы рассматриваем только конъюнкцию нескольких дизъюнктов.

<u>Опр.</u> **Пустым дизъюнктом** называется дизъюнкт без каких либо литералов.

<u>Договоренность.</u> Пустой дизъюнкт есть тождественный ноль.

Теперь все готово для того, чтобы ввести

**Метод резолюций для логики высказываний.** 

> Если выведены формулы $x_i \lor F$ и $\neg x_i \lor G$, то формула $F \lor G$ считается выведенной **методом резолюций**.
>
> Условимся, что выводить какую-либо формулу $G$ из системы дизъюнкторов $\{F_1; F_2; ...; F_n\}$ означает указать такую последовательность дизъюнкторов $\{G_1; G_2; ...; G_m\}$, что каждый дизъюнктор $G_j$ либо совпадает с некоторым дизъюнктором $F_i$ из исходной системы $\{F_i\}, 1 \le i \le n$, либо получен из предыдующих дизъюнкторов этой самой последовательности методом резолюций. Таким образом, под выведенной фомулой $G$ будет подразумеваться самый последний элемент $G_m$ последовательности $\{G_j\}, 1 \le j \le m$.

<u>Обозначение.</u> Метод резолюций обозначается следующим образом: $\frac {x \lor F, \neg x \lor G} {F \lor G}$.

Естественно будет задаться вопросом о том, для всякой ли системы дизъюнкторов метод резолюций позволяет понять, противоречива она или нет. Убедимся, что это на самом так. Именно, мы докажем следующую теорему.

<u>Теорема</u> (о полноте метода резолюций в логике высказываний). Для того, чтобы *набор дизъюнкторов $\{F_i\}, 1 \le i \le n$ был противоречив* (их конъюнкция была тождественным нулем), необходимо и достаточно, чтобы *из этой системы был выводим пустой дизъюнктор*.

> **Необходимость**.
>
> Для доказательство введем два необходимых термина. **Весом дизъюнктора** и **весом системы дизъюнкторов** будем называть количество различных с точностью до инверсии литералов в нем (в ней).
>
> Пусть система $\{F_i\}$ противоречива. Проведем индукцию по весу системы $\{F_i\}$.
>
> *База индукции.* Вес $n$ равен $1$ и система противоречива. Поскольку количество различных литералов с точностью до инверсии равно $1$, система имеет не более двух дизъюнкторов. Всего будет 2 варианта таких систем: $\{[]\}$ и $\{x, \neg x\}$. Из них сразу выводится пустой дизъюнктор.
>
> *Шаг индукции*. Итак, система противоречива имеет вес $n$, для всех систем с меньшим весом теорема доказана. Обозначим через $M$ множество всех дизъюнкторов этой системы. Через $M_+$ обозначим все дизъюнкторы из M, в которых нет литерала $\neg x_n$, а через $M_-$ - в которых нет $x_n$. Вес обоих этих множеств не превышает $n$. Через $\overline {M_+}$ множество $M_+$, в котором всюду вычеркнуто $x_n$, а через $\overline {M_-}$ - множество $\overline {M_-}$, в котором вычеркнуто $\neg x_n$.
>
> Докажем, что противоречивость $M$ влечет за собой противоречивость $\overline {M_+}$ и $\overline {M_-}$. Предположим обратное: есть такая интерпретация $\Phi{x_i}, 1 \le i \le n-1$, что в ней $\overline {M_+}$ или $\overline {M_-}$ принимает значение $1$. Тогда введем вспомогательную интерпретацию $\phi(x_i), 1 \le i \le n$ следующим образом:
>
> $\phi(x_i) = \begin{cases} \Phi(x_i), \text{ если } 1 \le i \le n-1 \\ 0, \text{ если } i = n \end{cases}$.
>
> В этой интепретации обе системы $M_+$ и $M_-$ непротиворечивы по построению $\phi(x_i)$. Но поскольку $M = M_+ \cup M_-$, $M$ тоже непротиворечива, что противоположно нашему предположению. Значит предположение было неверным.
>
> Итак, системы $\overline {M_+}$ и $\overline {M_-}$ противоречивы. Стоит заметить, что их веса строго меньше $n$. Тогда по предположению индукции из них методом резолюций выводим пустой дизъюнктор. Это означает, что применив метод резолюции к $M_+$, можно получить либо $[]$, либо $x_n$ в силу построения $M_+$. Аналогично, из $M_-$ выводим либо $[]$, либо $\neg x_i$. Наконец, из $M$ выводим пустой дизъюнктор методом резолюции.
>
> Индукция завершена и необходимость доказана.
>
> **Достаточность**.
>
> Из системы выводим пустой дизъюнктор. Он ни в какой интерпретации не принимает значение $1$, значит система, из которой пустой дизъюнктор был выведен, противоречива.
>
> Теорма полностью доказана.

## §2. Подстановки и унификации

<u>Договоренность.</u> В любой формальной теореме для свободных переменных **подразумевается квантор общности**.

>  Отметим, что даже в самой договоренности оговорено слово "любой", которое могло подразумеваться, то есть быть понятным из контекста предложения.

<u>Опр.</u> Пусть есть формула $F{x_1; x_2; ...; x_n}$. Соответствие (или таблица соответствия) $\sigma: (x_1 \rightarrow t_1; x_2 \rightarrow t_2; ...; x_n \rightarrow t_n)$ называется **подстановкой в некоторый дизъюнктор термов $t_i$ вместо символов $x_i$**.

<u>Обозначение.</u> Результаты подстановок будем обозначать $\sigma(F_i)$.

<u>Опр.</u> Подстановка $\sigma$ называется **унификацией** для данной системы , если результаты применения этой подстановки ко всем дизъюнкторам совпадают между собой, то есть выполнено равенство $\sigma(F_1)=\sigma(F_2)=...=\sigma(F_n)$.

>  **Пример 1.** Для системы $\{f^0x_1f^1(x_2);x_3x_4x_5\}$ подстановка $(x_3 \rightarrow f^0; x_4 \rightarrow x_2; x_5 \rightarrow f^1(x_2))$ является унификатором.
>
>  **Пример 2**. Система $\{x_1f^1(x_1);x_2x_2\}$ не унифицируема.

<u>Опр.</u> Унификатор $\tau$ называется **универсальным в данной системе дизъюнкторов**, если для любой подстановки $\sigma$ верно $\tau(F) = (\tau \circ \sigma)(F) = \tau(\sigma(F))$.

Справедлива 

<u>Теорема</u> (о существовании универсального унификатора для системы дизъюнкторов). Если система дизъюнкторов унифицируема, то для нее существует универсальный унификатор.

> **Доказательство.**

$\forall a \forall b (a \in R \land a \geq 0 \land b \in R \land B \geq 0 \rightarrow \frac{a+b}{2} \geq \sqrt{ab})$

| $\forall a \forall b (a \in R \land a \geq 0 \land b \in R \land B \geq 0 \rightarrow \frac{a+b}{2} \geq \sqrt{ab})$ | Что и как делаем                                             |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| $a \in R, a \geq 0, b \in R, b \geq 0$                       | Теорема дедукции                                             |
| $\exists c \in R: a = c^2 \land c \geq 0\\ \exists d \in R: b = d^2 \land d \geq 0$ | Теорема о полноте. $\forall x \geq 0 \exists y \geq 0 y^2 = x$ подстановка[] |
| $c - d \in R$                                                | Свойство $R$ как кольца. $\forall x, y \in R \rightarrow x -y \in R$ - подстановка |
| $(c - d) ^2 \geq 0$                                          | $\forall x \in R \rightarrow x^2 \geq 0 $ подстановка        |
| $c^2 - 2cd + d^2 \geq 0$                                     |                                                              |
| $\frac{c^2 + d^2}{2} = cd$                                   | $\forall x \in R \rightarrow x^2 \geq 0 $ подстановка $\sqrt{x}\sqrt{y} = \sqrt{xy}$ |
|                                                              |                                                              |
|                                                              |                                                              |

Подстановка. Принято писать не так: $x_i \rightarrow t_i$, а вот так: $x_i | t_i$

Подстановка $\sigma$ это такой набор предметных переменных: $\sigma = \{x_{i_1} | t_1, x_{i_2} | t_2 ... x_{i_n}\}$, где $x_{j_k} \neq t_k$

$\tau = \{x_{j_1} | s_1, x_{j_2}| s_2 ... x_{j_n} | s_m\}$

$\sigma \circ \tau$

1. ${x_{i_1} | t_1^{\sigma} | x_{i_2}}$
2. вычеркиваем для $x_{j_k} = x_{i_l}$
3. вычеркиваем, если $r_k^{\sigma} = x_{j_k}$

$\sigma = \{x_1 | x_2 , x_2 | f^2_1 x_1 _3, x_3 | f_1^0\}$

$\tau = \{x_1 | f_1^1 , x_2, x_2 | x_1, x_3 | x_4, x_4 | x_3}$



## **Тут нет большого куска!!! (Конец второго??? 3ий параграф??? Четвёртый и начало пятого!!!)**



*16 апреля*

Пусть $G$ - ориентированное дерево, у которого степень каждой вершины конечно.

**<u>Теорема</u>** (*Лемма Кёнига*): если $G$ бесконечно, то существует бесконечный путь, начинающийся от корня

> Начнём путь от корня. Из каждой вершины - бесконечное количество рёбер. Готово. $\square$



<u>Опр</u>.  $G$ называется **эрбрановым деревом**, если:

1. Путь от корня до люой вершины конечен;
2. На каждом ребре есть метка в виде элемента эрбранова базиса или его отрицания;
3. Ни на каком пути не встречается противоположных литералов;
4. Если из некоторой вершины выходят рёбра с разметкой $F_1, F_2, ..., F_k$ то $F_1 \lor F_2  \lor ...  \lor F_k =$  истина

<u>Опр</u>. Эрбраново дерево **полное**, если на любом максимальном пути для каждого элемента эрбраново дерева либо сам элемент, либо его отрицание встречается на этом пути.

![Неполные деревья](https://pp.userapi.com/c840424/v840424142/7590f/P4HJcLZwDCM.jpg)

> Эти деревья - неполные, потому что....
>
> Рис.2 - не замкнуто

<u>Опр</u>. **Пример дизьюнкта** - в дизъюнкт выполнена подстановка. *Основным примером* дизъюнкта является подстановка в этот дизъюнкт элементов эрбранова универсума (на место всех переменных)

<u>Опр</u>. Вершина дерева называется **опровергающей** данный дизъюнкт, если конъюнкция всех литералов стоящих до данной вершины и основного примера есть ложь. Самая *близкая* к корню опровергающая вершина называется **максимальной**.



$S_1 = {P^1_1x_1, \neg P^1_1x_2 \lor P^1_2 f^1_1x_1, \neg P^1_2 f^1_1 f^0_1}$

![картиночка, на которой дерево замкнуто](https://pp.userapi.com/c830308/v830308478/d7bba/Llt8s9RnV74.jpg)



<u>Опр</u>. **Обрезанием** эрбранова дерева называется удаление всех вершин, стоящих после максимальной опровергающей вершины.

<u>Опр</u>. Эрбраново дерево называется **замкнутым**, если все его листы являются максимальными опровергающими вершинами. Становится таковым после обрезания.



**<u>Теорема</u>** (*Эрбрана*): множество дизъюнктов $S$ невыполнимо тогда и только тогда, когда  любое полное эрбраново дерево [для этого множества дизъюнктов] после обрезания становится конечным.

$=>$ 

$S$ - невыполнимо. Тогда для любой $H$ интерпретации найдётся ложный дизъюнкт. Ложный дизъюнкт это основной пример => есть опровергающая вершина, в том числе максимальная. Любая интерпретация - путь в дереве, на каждом из которых встретится максимальная опровергающая вершина. Выполним обрезание дерева. Получается, что из начальной вершины любой путь конечен => всё дерево конечно.

$<=$

Все полные эрбрановы деревья были обрезаны и оказались конечны. Это значит, что мы на каждом пути нашли максимальную опровергающую вершину. После этого каждый путь заканчивается на основной пример. Какую бы интерпретацию мы не взяли, у нас найдётся дизъюнкт, который стал ложным. Значит, S невыполнимо в любой H интерпретации.

 $\square$



####$\S $ 6 Теорема о полноте метод резолюций, на языке первого порядка

**Теорема**. Множество дизъюнктов $S$ невыполнимо тогда и только тогда, когда из него выводится пустой лизъюнкт.

Имеется интерпретация всех дизъюнктов, и они в ней истинны

$D_1, D_2, ..., D_n$

$D_1 = L1 \lor F$,      $D_2 = \neg L1 \lor G $     => $F \lor G$

